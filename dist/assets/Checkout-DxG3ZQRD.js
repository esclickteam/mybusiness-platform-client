import{b as g,a as x,u as f,R as o,j as e,A as j}from"./index-D3TBT8UW.js";function y(){const h=g(),{planName:t,totalPrice:r,duration:p}=h.state||{},a=(x()||{}).user,c=f(),[l,i]=o.useState(!1),[d,n]=o.useState("");if(!t||!r)return e.jsxs("div",{className:"checkout-container error-container",children:[e.jsx("h2",{className:"error-message",children:"âŒ ×”×—×‘×™×œ×” ×©×‘×—×¨×ª ××™× ×” ×–××™× ×”."}),e.jsx("a",{className:"return-link",href:"/plans",children:"ğŸ”™ ×—×–×¨×” ×œ×¢××•×“ ×”×—×‘×™×œ×•×ª"})]});o.useEffect(()=>{a||c("/login")},[a,c]);const m=async()=>{var u;i(!0),n("");try{console.log("ğŸš€ ×©×œ×™×—×ª ×‘×§×©×ª ×ª×©×œ×•× ×œ×©×¨×ª:",{plan:t,price:r});const s=await j.post("/api/payments",{plan:t,price:r},{headers:{Authorization:`Bearer ${a==null?void 0:a.token}`}});console.log("âœ… ×ª×©×•×‘×ª ×”×©×¨×ª:",s.data),s.data&&s.data.paymentUrl?(console.log("ğŸ”— ××¢×‘×¨ ×œ×¢××•×“ ×”×ª×©×œ×•×:",s.data.paymentUrl),window.location.href=s.data.paymentUrl):(n("âŒ ×©×’×™××”: ×”×©×¨×ª ×œ× ×”×—×–×™×¨ ×›×ª×•×‘×ª ×ª×©×œ×•× ×ª×§×™× ×”."),console.error("âŒ ×©×’×™××”: ×”×©×¨×ª ×œ× ×”×—×–×™×¨ ×›×ª×•×‘×ª ×ª×©×œ×•× ×ª×§×™× ×”.",s.data))}catch(s){n("âŒ ×©×’×™××” ×‘×¢×ª ×™×¦×™×¨×ª ×ª×©×œ×•×. × ×¡×” ×©×•×‘ ×××•×—×¨ ×™×•×ª×¨."),console.error("âŒ ×©×’×™××” ×‘×ª×©×œ×•×:",((u=s.response)==null?void 0:u.data)||s.message)}finally{i(!1)}};return a?e.jsx("div",{className:"checkout-container",children:e.jsxs("div",{className:"checkout-card",children:[e.jsxs("h1",{children:["ğŸ”¹ ×ª×©×œ×•× ×¢×‘×•×¨ ×—×‘×™×œ×ª ",t]}),e.jsxs("p",{className:"checkout-price",children:["××—×™×¨ ×¡×•×¤×™: ",e.jsxs("strong",{children:[r," â‚ª"]})]}),e.jsxs("p",{className:"checkout-duration",children:["××©×š ×”×× ×•×™: ",e.jsxs("strong",{children:[p," ×—×•×“×©×™×"]})]}),d&&e.jsx("p",{className:"error-message",children:d}),e.jsx("button",{className:"pay-button",onClick:m,disabled:l,children:l?"â³ ××¢×‘×“ ×ª×©×œ×•×...":"ğŸ’³ ×¢×‘×•×¨ ×œ×ª×©×œ×•×"})]})}):null}export{y as default};
