import{r as u,u as y,j as e,A as d}from"./index-D3TBT8UW.js";const v=()=>{const[s,p]=u.useState({name:"",email:"",password:"",confirmPassword:"",userType:"customer"}),[l,m]=u.useState(""),c=y(),t=r=>{p({...s,[r.target.name]:r.target.value})},h=async()=>{var r,i,o,a;try{const n=await d.post("/auth/register",{name:s.name,email:s.email,password:s.password,userType:s.userType});console.log("המשתמש נרשם בהצלחה:",n.data),g(s.email,s.password)}catch(n){console.error("שגיאה בהרשמה:",(r=n.response)==null?void 0:r.data),m(((o=(i=n.response)==null?void 0:i.data)==null?void 0:o.error)||(((a=n.response)==null?void 0:a.status)===400?"❌ האימייל כבר קיים במערכת":"❌ שגיאה בלתי צפויה, נסה שוב מאוחר יותר."))}},g=async(r,i)=>{var o;try{const a=await d.post("/auth/login",{email:r,password:i});console.log("ההתחברות הצליחה:",a.data),localStorage.setItem("user",JSON.stringify(a.data.user)),localStorage.setItem("token",a.data.token),s.userType==="business"?c("/plans"):c("/")}catch(a){console.error("שגיאה בהתחברות:",(o=a.response)==null?void 0:o.data)}},x=r=>{r.preventDefault(),h()};return e.jsxs("div",{className:"register-container",children:[e.jsx("h2",{children:"הרשמה"}),e.jsxs("form",{onSubmit:x,children:[e.jsx("input",{type:"text",name:"name",placeholder:"שם מלא",value:s.name,onChange:t,required:!0}),e.jsx("input",{type:"email",name:"email",placeholder:"אימייל",value:s.email,onChange:t,required:!0}),e.jsx("input",{type:"password",name:"password",placeholder:"סיסמה",value:s.password,onChange:t,required:!0}),e.jsx("input",{type:"password",name:"confirmPassword",placeholder:"אימות סיסמה",value:s.confirmPassword,onChange:t,required:!0}),e.jsxs("div",{className:"radio-container",children:[e.jsxs("div",{className:"radio-option",children:[e.jsx("input",{type:"radio",id:"customer",name:"userType",value:"customer",checked:s.userType==="customer",onChange:t}),e.jsx("label",{htmlFor:"customer",children:"הרשמה כלקוח"})]}),e.jsxs("div",{className:"radio-option",children:[e.jsx("input",{type:"radio",id:"business",name:"userType",value:"business",checked:s.userType==="business",onChange:t}),e.jsx("label",{htmlFor:"business",children:"הרשמה כבעל עסק"})]})]}),e.jsx("button",{type:"submit",className:"register-button",children:"הירשם"}),l&&e.jsx("p",{className:"error-message",children:l})]})]})};export{v as default};
